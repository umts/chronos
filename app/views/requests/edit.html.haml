%h1 Time Off Request
%p Modifying an already approved request will make it not approved until a supervisor approves it again.

- if @request.approved?
  %h3
    Request approved by
    = @current_user.first_name + ' ' + @current_user.last_name
- if can_approve_request
  - if @request.approved?
    = button_to 'Reject', approve_request_path(@request), class: 'btn btn-danger'
  - else
    = button_to 'Approve', approve_request_path(@request), class: 'btn btn-success'

= form_for @request, html: { class: 'form-horizontal' } do |f|
  .form-group
    .control-label.col-xs-2
      = f.label :name, 'Name'
    .col-xs-5
      = text_field_tag :name, @request.user.first_name + ' ' + @request.user.last_name,
                              class: 'form-control',
                              disabled: true
  .form-group
    .control-label.col-xs-2
      = f.label :start_time, 'Start Time'
    .col-xs-5
      = f.text_field :start_time, class: 'form-control', required: true, disabled: !can_update_request
  .form-group
    .control-label.col-xs-2
      = f.label :end_time, 'End Time'
    .col-xs-5
      = f.text_field :end_time, class: 'form-control', required: true, disabled: !can_update_request
  .form-group
    .control-label.col-xs-2
      = f.label :request_type_id, 'Type'
    .col-xs-5
      = f.select :request_type_id,
                 @request_types.collect { |rt| ["#{rt.description} (#{rt.code})", rt.id] },
                 { include_blank: 'None' },
                 class: 'selectpicker form-control',
                 required: true,
                 disabled: !can_update_request

  .form-group
    .col-xs-offset-2.col-xs-5
      = f.submit('Update', class: 'btn btn-primary') if can_update_request
      = link_to 'Cancel', requests_path, class: 'btn btn-default'
